(function(){$(function(){function e(n){t.setDefaultLanguage({name:n.name}).done(function(){i();abp.notify.success(app.localize("SuccessfullySaved"))})}function o(n){abp.message.confirm(app.localize("LanguageDeleteWarningMessage",n.displayName),function(r){r&&t.deleteLanguage({id:n.id}).done(function(){i();abp.notify.success(app.localize("SuccessfullyDeleted"))})})}function i(){f.ajax.reload()}var u=$("#LanguagesTable"),t=abp.services.app.language,n={create:abp.auth.hasPermission("Pages.Administration.Languages.Create"),edit:abp.auth.hasPermission("Pages.Administration.Languages.Edit"),changeTexts:abp.auth.hasPermission("Pages.Administration.Languages.ChangeTexts"),"delete":abp.auth.hasPermission("Pages.Administration.Languages.Delete")},r=new app.ModalManager({viewUrl:abp.appPath+"AppAreaName/Languages/CreateOrEditModal",scriptUrl:abp.appPath+"view-resources/Areas/AppAreaName/Views/Languages/_CreateOrEditModal.js",modalClass:"CreateOrEditLanguageModal"}),f=u.DataTable({paging:!1,serverSide:!1,processing:!1,listAction:{ajaxFunction:t.getLanguages},columnDefs:[{targets:0,data:null,orderable:!1,autoWidth:!1,defaultContent:"",rowAction:{cssClass:"btn btn-xs btn-primary blue",text:'<i class="fa fa-cog"><\/i> '+app.localize("Actions")+' <span class="caret"><\/span>',items:[{text:app.localize("Edit"),visible:function(t){return n.edit&&t.record.tenantId===abp.session.tenantId},action:function(n){r.open({id:n.record.id})}},{text:app.localize("ChangeTexts"),visible:function(){return n.changeTexts},action:function(n){document.location.href=abp.appPath+"AppAreaName/Languages/Texts?languageName="+n.record.name}},{text:app.localize("SetAsDefaultLanguage"),visible:function(){return n.edit},action:function(n){e(n.record)}},{text:app.localize("Delete"),visible:function(t){return n.delete&&t.record.tenantId===abp.session.tenantId},action:function(n){o(n.record)}}]}},{targets:1,data:"displayName",render:function(n,t,i,r){var u=$("<span/>").append($("<i/>").addClass(i.icon).css("margin-right","5px")).append($("<span/>").attr("data-language-name",i.name).text(i.displayName));return r.settings.rawServerResponse.defaultLanguageName===i.name&&u.addClass("text-bold").append(" ("+app.localize("Default")+")"),u[0].outerHTML}},{targets:2,data:"name"},{targets:3,data:"tenantId",visible:abp.session.tenantId?!0:!1,render:function(n){var t=$("<span/>").addClass("label");return n!==abp.session.tenantId?t.addClass("label-default").text(app.localize("Yes")):t.addClass("label-success").text(app.localize("No")),t[0].outerHTML}},{targets:4,data:"creationTime",render:function(n){return moment(n).format("L")}},{targets:5,data:"isDisabled",render:function(n){var i=!n,t=$("<span/>").addClass("label");return i?t.addClass("label-success").text(app.localize("Yes")):t.addClass("label-default").text(app.localize("No")),t[0].outerHTML}}]});$("#CreateNewLanguageButton").click(function(){r.open()});abp.event.on("app.createOrEditLanguageModalSaved",function(){i()})})})();