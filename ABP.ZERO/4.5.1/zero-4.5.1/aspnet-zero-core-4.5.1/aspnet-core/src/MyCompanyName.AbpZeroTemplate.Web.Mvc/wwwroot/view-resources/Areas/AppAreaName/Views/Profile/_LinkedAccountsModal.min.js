(function(n){app.modals.LinkedAccountsModal=function(){function o(n){abp.ajax({url:abp.appPath+"Account/SwitchToLinkedAccount",data:JSON.stringify({targetUserId:n.id,targetTenantId:n.tenantId}),success:function(){app.supportsTenancyNameInUrl||abp.multiTenancy.setTenantIdCookie(n.tenantId)}})}function s(n){abp.message.confirm(app.localize("LinkedUserDeleteWarningMessage",n.username),function(i){i&&t.unlinkUser({userId:n.id,tenantId:n.tenantId}).done(function(){u();abp.notify.success(app.localize("SuccessfullyUnlinked"))})})}function u(){r.ajax.reload()}var f,e=n("#LinkedAccountsTable"),t=abp.services.app.userLink,i,r;this.init=function(n){f=n};i=new app.ModalManager({viewUrl:abp.appPath+"AppAreaName/Profile/LinkAccountModal",scriptUrl:abp.appPath+"view-resources/Areas/AppAreaName/Views/Profile/_LinkAccountModal.js",modalClass:"LinkAccountModal"});n("#LinkNewAccountButton").click(function(){i.open({},function(){u()})});r=e.DataTable({paging:!0,serverSide:!0,processing:!0,listAction:{ajaxFunction:t.getLinkedUsers},columnDefs:[{targets:0,data:null,orderable:!1,defaultContent:"",rowAction:{element:n("<button/>").addClass("btn btn-xs btn-primary blue").text(app.localize("LogIn")).append(n("<i/>").addClass("icon-login")).click(function(){o(n(this).data())})}},{targets:1,data:"username",orderable:!1,render:function(t,i,r){return n("<div/>").append(n("<span/>").text(app.getShownLinkedUserName(r)))[0].outerHTML}},{targets:2,data:null,orderable:!1,defaultContent:"",rowAction:{element:n("<button/>").addClass("btn btn-xs btn-danger red").attr("title",app.localize("Delete")).append(n("<i/>").addClass("icon-trash")).click(function(){s(n(this).data())})}}]})}})(jQuery);